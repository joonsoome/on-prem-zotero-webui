version: "3.8"

services:
  zotero-pdf-proxy:
    image: ${PDF_PROXY_IMAGE:-ghcr.io/joonsoome/on-prem-zotero-webui/pdf-proxy:dev}
    build:
      context: .
      dockerfile: Dockerfile.pdf-proxy
    environment:
      - ZOTERO_ROOT=/data/zotero
    volumes:
      - ${DEV_ZOTERO_SAMPLE_ROOT:-./sample-webdav/zotero}:/data/zotero
      - ./app:/app
    ports:
      - "${DEV_PDF_PROXY_PORT:-8280}:8000"

  web-library:
    image: ${WEB_LIBRARY_IMAGE:-ghcr.io/joonsoome/on-prem-zotero-webui/web-library:dev}
    build:
      context: .
      dockerfile: Dockerfile.web-library
    ports:
      - "${DEV_WEB_LIBRARY_PORT:-8281}:80"
    depends_on:
      - zotero-pdf-proxy
